# К Mutant Detector API

[![Java](https://img.shields.io/badge/Java-17-orange.svg)](https://www.oracle.com/java/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.2.0-brightgreen.svg)](https://spring.io/projects/spring-boot)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://www.docker.com/)
[![Tests](https://img.shields.io/badge/Tests-Passing-success.svg)]()
[![Coverage](https://img.shields.io/badge/Coverage-97%25-brightgreen.svg)]()

>  **API REST** de alto rendimiento para detectar mutantes analizando secuencias de ADN. Desarrollado como examen t茅cnico de Backend Developer.

---

##  Tabla de Contenidos

1. [Descripci贸n del Proyecto](#-descripci贸n-del-proyecto)
2. [Tecnolog铆as Utilizadas](#-tecnolog铆as-utilizadas)
3. [Arquitectura](#-arquitectura)
4. [Instalaci贸n y Ejecuci贸n](#-instalaci贸n-y-ejecuci贸n)
5. [Uso de la API](#-uso-de-la-api)
6. [Algoritmo y Optimizaciones](#-algoritmo-y-optimizaciones)
7. [Testing y Cobertura](#-testing-y-cobertura)
8. [Despliegue (Docker & Render)](#-despliegue-docker--render)

---

##  Descripci贸n del Proyecto

Magneto quiere reclutar la mayor cantidad de mutantes posible para su ej茅rcito. Este sistema permite detectar si un humano es mutante bas谩ndose en su secuencia de ADN.

**Regla de Negocio:**
Un humano es **mutante** si se encuentra **m谩s de una secuencia** de cuatro letras iguales (`AAAA`, `TTTT`, `CCCC`, `GGGG`) de forma oblicua, horizontal o vertical en una matriz de ADN de (NxN).

---

##  Tecnolog铆as Utilizadas

* **Lenguaje:** Java 17
* **Framework:** Spring Boot 3.2.0
* **Base de Datos:** H2 Database (En memoria, optimizada para velocidad)
* **Build Tool:** Gradle
* **Testing:** JUnit 5, Mockito, MockMvc
* **Cobertura:** JaCoCo (97% de cobertura en Servicios)
* **Documentaci贸n:** SpringDoc OpenAPI (Swagger UI)
* **Contenedor:** Docker
* **Nube:** Render

---

##  Arquitectura

El proyecto sigue una **Arquitectura en Capas** (Layered Architecture) para asegurar la separaci贸n de responsabilidades:

```text
src/main/java/com/mercadolibre/mutant_detector/
 config/       # Configuraci贸n de Beans (Swagger)
 controller/   # Capa de entrada REST (Manejo de HTTP)
 dto/          # Objetos de transferencia de datos (Request/Response)
 entity/       # Entidades JPA (Mapeo a Base de Datos)
 repository/   # Capa de acceso a datos (DAO/Repository Pattern)
 service/      # L贸gica de negocio y Algoritmos
 Instalaci贸n y Ejecuci贸n
Prerrequisitos
Java 17 JDK

Gradle (o usar el wrapper incluido)

Ejecuci贸n Local
Clonar el repositorio:

Bash

git clone [https://github.com/LucianoMasAndres/mutant-detector.git](https://github.com/LucianoMasAndres/mutant-detector.git)
cd mutant-detector
Ejecutar con Gradle:

Bash

./gradlew bootRun
La API estar谩 disponible en http://localhost:8080.

 Uso de la API
Documentaci贸n Interactiva (Swagger)
Una vez iniciada la aplicaci贸n, puedes probar todos los endpoints visualmente en:  http://localhost:8080/swagger-ui.html

Endpoints Principales
1. Detectar Mutante
URL: POST /mutant

Descripci贸n: Analiza una secuencia de ADN.

Body (JSON):

JSON

{
    "dna": [
        "ATGCGA",
        "CAGTGC",
        "TTATGT",
        "AGAAGG",
        "CCCCTA",
        "TCACTG"
    ]
}
Respuestas:

200 OK: Es Mutante.

403 Forbidden: Es Humano.

400 Bad Request: ADN inv谩lido (caracteres err贸neos, matriz no cuadrada, null).

2. Estad铆sticas
URL: GET /stats

Descripci贸n: Devuelve el ratio de mutantes vs humanos analizados.

Respuesta (JSON):

JSON

{
    "count_mutant_dna": 40,
    "count_human_dna": 100,
    "ratio": 0.4
}
К Algoritmo y Optimizaciones
El n煤cleo del proyecto es MutantDetector.java. Se han implementado optimizaciones cr铆ticas para manejar el tr谩fico masivo requerido por Magneto:

Early Termination (Fail-Fast): El algoritmo se detiene inmediatamente (return true) apenas encuentra la segunda secuencia mutante. No recorre el resto de la matriz innecesariamente.

Complejidad Espacial O(1): No se utilizan matrices auxiliares, listas ni hashmaps para la b煤squeda. Se trabaja sobre la matriz original.

Acceso Directo: Se convierte el array de Strings a char[][] al inicio para evitar el overhead de String.charAt() en cada iteraci贸n.

Boundary Checking: Se verifican los l铆mites de los 铆ndices antes de iniciar una b煤squeda direccional, evitando excepciones y ciclos in煤tiles.

Persistencia con Hashing: Se utiliza SHA-256 para generar un hash 煤nico de cada ADN. Esto permite buscar en la base de datos (ndice Unique) si un ADN ya fue analizado antes de volver a ejecutar el algoritmo (Cach茅 de Base de Datos).

И Testing y Cobertura
El proyecto cuenta con una suite de tests exhaustiva (>35 tests) utilizando JUnit 5 y Mockito.

Unit Tests: Prueban el algoritmo MutantDetector con matrices de todos los tama帽os, casos bordes, mutantes cruzados, etc.

Integration Tests: Prueban el MutantController y la conexi贸n completa usando MockMvc.

Service Tests: Prueban la l贸gica de negocio y el guardado en BD usando Mocks.

Reporte de Cobertura (JaCoCo)
Para generar el reporte visual de cobertura:

Bash

./gradlew test jacocoTestReport
El reporte estar谩 en: build/reports/jacoco/test/html/index.html. Cobertura actual: >97% en Servicios.

 Despliegue (Docker & Render)
La aplicaci贸n est谩 "Dockerizada" y lista para la nube.

Dockerfile Optimizado
El proyecto utiliza un Multi-Stage Build para generar una imagen final ligera (~200MB) basada en eclipse-temurin:17-jre-alpine.

Ejecutar con Docker
Bash

docker build -t mutant-detector .
docker run -p 8080:8080 mutant-detector
Enlace de Producci贸n (Render)
La API est谩 desplegada p煤blicamente en:  https://mutant-detector-fq4y.onrender.com/swagger-ui.html

(Nota: Al estar en el plan gratuito de Render, el servidor puede tardar unos 50 segundos en "despertar" si lleva tiempo inactivo).

Desarrollado por Luciano Mas Andres